{"version":3,"sources":["all.js","chart.js","loader.js","mirror.js","swiper.js"],"names":["users","finishedData","unFinishedData","rate","localStorage","getItem","JSON","stringify","players","setItem","waitAlert","Swal","fire","icon","title","text","location","pathname","userInfo","parse","undefined","document","querySelector","innerHTML","name","leaderboard","sortedPlayers","Object","keys","sort","a","b","i","length","playerName","playerScore","push","swiper","Swiper","slidesPerView","spaceBetween","loop","loopFillGroupWithBlank","navigation","nextEl","prevEl","loader","setTimeout","load","style","display","getName","value","str","userName","nickName","user","finished","percentage","swal","button","removeItem","userfinishedData","filter","addUser","addEventListener","toFixed","forEach","e","index","setAttribute","chart","c3","generate","bindto","data","columns","colors","已完成","未完成","type","onclick","d","console","log","onmouseover","onmouseout","donut","chart2","剩餘關卡","current_lesson","lessons","description","code2Learn","instruction","signature","imageDiff","totalPixels","init","editor","CodeMirror","fromTextArea","getElementById","mode","theme","lineNumbers","lineWrapping","clickAlert","saveData","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","isDenied","run","code","getValue","canvasPrepare","htmlCode","jsCode","doc","contentWindow","open","write","previewWindow","close","resizeCanvas","width","clientWidth","height","clientHeight","images","canvasCode","destinationCode","sourceCode","preview","verification","clearScreen","showSample","getSignatures","setValue","parseInt","correct","progressCheck","correctArray","correctNum","classList","add","rateCount","status","check","distanceSquare","html","confirmButtonColor","cancelButtonColor","next","splice","updatePreview","replace","reset","questionThree","imageUrl","imageWidth","imageHeight","imageAlt","footer","totalCheck","href","prev"],"mappings":"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,MAAAA,OAAO,EAAE,CACL,CAAC,KAAD,YAAW3E,YAAX,EADK,EAEL,CAAC,MAAD,YAAYC,cAAZ,EAFK;AADD,KAAZ;AAMD,GAPS,EAOP,IAPO,CAAV,CAlFyF,CA2FzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;ACtOD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACNA,IAAIc,QAAQ,CAACC,QAAT,IAAqB,mCAArB,IAA0DD,QAAQ,CAACC,QAAT,IAAqB,oBAAnF,EAAyG;AACvGyE,EAAAA,cAAc,GAAG,CAAjB;AACD,CAFD,MAEO,IAAI1E,QAAQ,CAACC,QAAT,IAAqB,uCAArB,IAA8DD,QAAQ,CAACC,QAAT,IAAqB,wBAAvF,EAAiH;AACtHyE,EAAAA,cAAc,GAAG,CAAjB;AACD,CAFM,MAEA;AACLA,EAAAA,cAAc,GAAG,CAAjB;AACD;;AACD,IAAMC,OAAO,GAAG,CACd;AACE7E,EAAAA,KAAK,EAAE,UADT;AAEE8E,EAAAA,WAAW,EAAE,IAFf;AAGEC,EAAAA,UAAU,4QAHZ;AAWEC,EAAAA,WAAW,0DAXb;AAYEC,EAAAA,SAAS,EAAE;AAAEC,IAAAA,SAAS,EAAE,CAAb;AAAgBC,IAAAA,WAAW,EAAE;AAA7B,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","file":"all.js","sourcesContent":["let users = [];\nlet finishedData;\nlet unFinishedData;\nlet rate;\n\nif(localStorage.getItem(\"players\",JSON.stringify(players))){\n  ;\n}else{\n  let players = {\n  \"王小明\":{\"rate\":14},\n  \"大華\":{\"rate\":5},\n  \"Larry\":{\"rate\":6},\n  \"David\":{\"rate\":3}\n}\nlocalStorage.setItem(\"players\",JSON.stringify(players));\n}\nfunction waitAlert(){\n  Swal.fire({\n    icon: 'error',\n    title: 'Oops...',\n    text: '功能還未啟用!',\n  })\n}\n//leaderboard\n//localhost的pathname=/course.html\n//github Pages的pathname=/canvasLearning/course.html\nif(location.pathname == \"/canvasLearning/course.html\"||location.pathname == \"/course.html\"){\n  let userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\n  if(userInfo!=undefined){\n    document.querySelector(\"#user\").innerHTML=`<h3 class=\"text-primary\" id=\"user\">歡迎，${userInfo[0].name}</h3>`;\n  }else{\n    ;\n  }\n  let leaderboard=[];\n  let players = JSON.parse(localStorage.getItem(\"players\"));\n  let sortedPlayers = Object.keys(players).sort(function(a,b){\n  return players[b].rate - players[a].rate;\n  });\n  for (let i = 0; i < sortedPlayers.length; i++) {\n    let playerName = sortedPlayers[i];\n    let playerScore = players[playerName].rate;\n    leaderboard.push({\"name\": playerName, \"rate\": playerScore, \"rank\": i + 1});\n}\nfor(let i=0; i<leaderboard.length; i++){\n  document.querySelector(`#rank${i+1}`).innerHTML = `<h5 class=\"fs-3\" id=\"rank${i+1}\">${leaderboard[i].name}</h5>`\n  document.querySelector(`#rank${i+1}Rate`).innerHTML = `<h5 class=\"fs-3\" id=\"rank${i+1}\">(${leaderboard[i].rate})</h5>`\n}\n//swiper\nlet swiper = new Swiper(\".courseSwiper\", {\n  slidesPerView: 'auto',\n  spaceBetween: 20,\n  // slidesPerGroup: 3,\n  loop: true,\n  loopFillGroupWithBlank: true,\n  // pagination: {\n  //   el: \".swiper-pagination\",\n  //   clickable: true,\n  // },\n  navigation: {\n    nextEl: \".swiper-button-next\",\n    prevEl: \".swiper-button-prev\",\n  },\n});\n}\n\nif(location.pathname == \"/canvasLearning/index.html\"||location.pathname ==\"/index.html\"||location.pathname ==\"/\"||location.pathname ==\"/canvasLearning/\"){\n  //loader\n  const load = document.querySelector('.loader');\n  function loader (){\n    setTimeout(() => { \n      load.style.display = 'none';}\n      , 3000);\n  }\nloader ();\n  let nickName = document.querySelector(\"#nickName\");\n  let  addUser = document.querySelector(\"#addUser\");\n  function getName(value) {\n    let str = \"\";\n    let userName = nickName.value;\n    str = userName;\n    let user={\n      name:str,\n      rate:0,\n      finished:[false,false,false,false,false,false,false,false,false],\n      percentage:0,\n    };\n    users.push(user);\n    localStorage.setItem(\"userInfo\",JSON.stringify(users));\n    let userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\n    swal(\"Good job!\", `成功建立使用者 ： ${str}`, \"success\", {\n      button: \"確認\",\n    });\n    if(userInfo!=undefined){\n      document.querySelector(\"#user\").innerHTML=`<h3 class=\"text-primary\" id=\"user\">歡迎，${userInfo[0].name}</h3>`;\n    }else{\n      ;\n    }\n    nickName.value='';\n    localStorage.removeItem('correct');\n    let userfinishedData = userInfo[0].finished.filter(function(value) {\n      return value == true;\n    });;\n    if(userfinishedData.length==0){\n      finishedData = userfinishedData.length +1;\n    }else{\n      finishedData = userfinishedData.length\n    }\n    unFinishedData = 9-finishedData;\n  }\naddUser.addEventListener(\"click\", getName);\n\n}\n\nif(location.pathname == \"/canvasLearning/record.html\"||location.pathname == \"/record.html\"){\nlet percentage = 0;\nlet userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\nif(userInfo!=undefined){\n  document.querySelector(\"#user\").innerHTML=`<h3 class=\"text-primary\" id=\"user\">歡迎，${userInfo[0].name}</h3>`;\n}else{\n  ;\n}\nlet userfinishedData = userInfo[0].finished.filter(function(value) {\n  return value == true;\n});\nif(userfinishedData.length==0){\n  finishedData = 0;\n  percentage = 0;\n}else{\n  finishedData = userfinishedData.length;\n  percentage = ((finishedData/9)*100).toFixed(2);\n}\nunFinishedData = 9-finishedData;\ndocument.querySelector(\"#percentage\").innerHTML=`<span class=\"text-primary\" >${percentage}%</span>`;\ndocument.querySelector(\"#userName\").innerHTML=` <div class=\"fs-3 mb-2 text-center\" >${userInfo[0].name}</div>`;\ndocument.querySelector(\"#rate\").innerHTML=` <span class=\"text-primary\" >${userInfo[0].rate}</span>`;\nuserInfo[0].finished.forEach((e,index)=>{\n  if(e==true){\n    let str=`${index+1}`\n    document.querySelector(`#item${str}`).setAttribute(\"class\",\"list-group-item \");\n  }\n  else{\n    ;\n  }\n})\n\n  var chart = c3.generate({\n    bindto: \"#chart\",\n    data: {\n        columns: [\n            ['已完成', `${finishedData}`],\n            ['未完成', `${unFinishedData}`],\n        ],\n        colors: {\n          已完成: '#DD4C57',\n          未完成: '#EB9C37',\n        },\n        type : 'donut',\n        onclick: function (d, i) { console.log(\"onclick\", d, i); },\n        onmouseover: function (d, i) { console.log(\"onmouseover\", d, i); },\n        onmouseout: function (d, i) { console.log(\"onmouseout\", d, i); }\n    },\n    donut: {\n        title: `積分數：${userInfo[0].rate}/33`\n    }\n  });\n  setTimeout(function () {\n    chart.load({\n        columns: [\n            [\"已完成\", `${finishedData}`],\n            [\"未完成\", `${unFinishedData}`],\n        ]\n    });\n  }, 2500);\n  \n  var chart2 = c3.generate({\n    bindto: \"#chart2\",\n    data: {\n        columns: [\n            ['已完成', `${finishedData}`],\n            ['剩餘關卡', `${unFinishedData}`],\n        ],\n        colors: {\n          已完成: \"#03A9F4\",\n          剩餘關卡: \"#76FF03\",\n        },\n        type : 'donut',\n        onclick: function (d, i) { console.log(\"onclick\", d, i); },\n        onmouseover: function (d, i) { console.log(\"onmouseover\", d, i); },\n        onmouseout: function (d, i) { console.log(\"onmouseout\", d, i); }\n    },\n    donut: {\n        title: `完成比例 : ${percentage}%`\n    }\n  });\n  \n  setTimeout(function () {\n    chart2.load({\n        columns: [\n            [\"已完成\", `${finishedData}`],\n            [\"剩餘關卡\", `${unFinishedData}`],\n        ]\n    });\n  }, 3500);\n  \n  // var chart3 = c3.generate({\n  //   bindto: \"#chart3\",\n  //   data: {\n  //     x: 'x',\n  //     columns: [\n  //         ['x', '2022-09-01', '2022-09-02', '2022-09-03', '2022-09-04', '2022-09-05', '2022-09-06', '2022-09-07'],\n  //         ['已完成', 3, 5, 6, 7, 9, 11 ],\n  //         ['剩餘關卡', 30, 27, 24, 22, 19, 19]\n  //     ]\n  // },\n  // axis: {\n  //     x: {\n  //         type: 'timeseries',\n  //         tick: {\n  //             format: '%Y-%m-%d'\n  //         }\n  //     }\n  // }\n  // });\n  // setTimeout(function () {\n  //   chart3.load({\n  //       columns: [\n  //           [\"獲得積分數\", 12,13,15,17,19,21],\n  //       ]\n  //   });\n  // }, 1500);\n}\n","// var chart = c3.generate({\n//     bindto: \"#chart\",\n//     data: {\n//         columns: [\n//             ['已完成', 11],\n//             ['未完成', 9],\n//         ],\n//         colors: {\n//           已完成: '#DD4C57',\n//           未完成: '#EB9C37',\n//         },\n//         type : 'donut',\n//         onclick: function (d, i) { console.log(\"onclick\", d, i); },\n//         onmouseover: function (d, i) { console.log(\"onmouseover\", d, i); },\n//         onmouseout: function (d, i) { console.log(\"onmouseout\", d, i); }\n//     },\n//     donut: {\n//         title: \"積分數：11/20\"\n//     }\n//   });\n//   setTimeout(function () {\n//     chart.load({\n//         columns: [\n//             [\"已完成\", 11],\n//             [\"未完成\", 9],\n//         ]\n//     });\n//   }, 2500);\n  \n//   var chart2 = c3.generate({\n//     bindto: \"#chart2\",\n//     data: {\n//         columns: [\n//             ['已完成', 91],\n//             ['剩餘關卡', 9],\n//         ],\n//         colors: {\n//           已完成: \"#03A9F4\",\n//           剩餘關卡: \"#76FF03\",\n//         },\n//         type : 'donut',\n//         onclick: function (d, i) { console.log(\"onclick\", d, i); },\n//         onmouseover: function (d, i) { console.log(\"onmouseover\", d, i); },\n//         onmouseout: function (d, i) { console.log(\"onmouseout\", d, i); }\n//     },\n//     donut: {\n//         title: \"完成比例：91%\"\n//     }\n//   });\n  \n//   setTimeout(function () {\n//     chart2.load({\n//         columns: [\n//             [\"已完成\", 91],\n//             [\"剩餘關卡\", 9],\n//         ]\n//     });\n//   }, 1500);\n  \n//   var chart3 = c3.generate({\n//     bindto: \"#chart3\",\n//     data: {\n//       x: 'x',\n//       columns: [\n//           ['x', '2022-09-01', '2022-09-02', '2022-09-03', '2022-09-04', '2022-09-05', '2022-09-06', '2022-09-07'],\n//           ['已完成', 3, 5, 6, 7, 9, 11 ],\n//           ['剩餘關卡', 30, 27, 24, 22, 19, 19]\n//       ]\n//   },\n//   axis: {\n//       x: {\n//           type: 'timeseries',\n//           tick: {\n//               format: '%Y-%m-%d'\n//           }\n//       }\n//   }\n//   });\n//   setTimeout(function () {\n//     chart3.load({\n//         columns: [\n//             [\"獲得積分數\", 12,13,15,17,19,21],\n//         ]\n//     });\n//   }, 1500);","// const load = document.querySelector('.loader');\n// function loader (){\n//   setTimeout(() => { \n//     load.style.display = 'none';}\n//     , 3000);\n// }\n// loader ();","if (location.pathname == \"/canvasLearning/courseDetail.html\"||location.pathname == \"/courseDetail.html\") {\n  current_lesson = 0;\n} else if (location.pathname == \"/canvasLearning/courseDetail-mid.html\"||location.pathname == \"/courseDetail-mid.html\") {\n  current_lesson = 6;\n} else {\n  current_lesson = 8;\n}\nconst lessons = [\n  {\n    title: \"lesson 1\",\n    description: \"線段\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\nvar ctx = canvas.getContext('2d');\n      \\nctx.clearRect(0,0,canvas.width,canvas.height);\n      \\nctx.beginPath();\n      \\nctx.moveTo(10,10);\n      \\nctx.lineTo(150,50);\n      \\nctx.stroke();\n      `,\n    instruction: `// 畫線段，從(10,10)到(150,50)`,\n    signature: { imageDiff: 0, totalPixels: 4708 },\n    rate:2,\n    init:`ctx.beginPath()開始路徑\n    ctx.moveTo();移動座標點（起點）\n    ctx.lineTo();連線到另一點\n    ctx.stroke();繪製出路徑`,\n  },\n  {\n    title: \"lesson 2\",\n    description: \"矩形\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\nvar ctx = canvas.getContext('2d');\n      \\nctx.clearRect(0,0,canvas.width,canvas.height);\n      \\nctx.fillRect(10, 10, 50, 50);\n      `,\n    instruction: `//  畫矩形，原點 (10,10) 長、寬 50 \n      `,\n    signature: { imageDiff: 0, totalPixels: 4708 },\n    rate:3,\n    init:`ctx.fillRect()方法可以畫填色矩形`\n  },\n  {\n    title: \"lesson 3\",\n    description: \"三角形\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\nvar ctx = canvas.getContext('2d');\n      \\nctx.clearRect(0,0,canvas.width,canvas.height);\n      \\nctx.beginPath();\n      \\nctx.moveTo(100,50);\n      \\nctx.lineTo(60,90);\n      \\nctx.lineTo(140,90);\n      \\nctx.closePath();\n      \\nctx.stroke();\n      `,\n    instruction: `//  畫三角形，三點分別為(100,50)、(60,90)、(140,90)\n      `,\n    signature: { imageDiff: 238, totalPixels: 398 },\n    rate:4,\n    init:`記得用ctx.closePath()將各點連接起來`\n  },\n  {\n    title: \"lesson 4\",\n    description: \"圓形\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\n var ctx = canvas.getContext('2d');\n      \\n ctx.clearRect(0,0,canvas.width,canvas.height);\n      \\n ctx.beginPath();\n      \\n ctx.arc(100, 75, 50, 0, 2 * Math.PI);\n      \\n ctx.stroke();\n      `,\n    instruction: `//   劃一個無填滿圓，中心點(100,75)半徑50\n      `,\n    signature: { imageDiff: 823, totalPixels: 3164 },\n    rate:3,\n    init:`\n    ctx.arc()方法的參數有：：圓心x,圓心y座標,半徑,起始角度,結束角度`\n  },\n  {\n    title: \"lesson 5\",\n    description: \"弧形\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\n var ctx = canvas.getContext('2d');\n      \\n ctx.clearRect(0,0,canvas.width,canvas.height);\n      \\n ctx.beginPath();\n      \\n ctx.arc(100, 60, 50, Math.PI/2*3, Math.PI/2);\n      \\n ctx.stroke();\n      `,\n    instruction: `//   畫起始角270度、結束角90度弧型，中心點(100,60)半徑50\n      `,\n    signature: { imageDiff: 823, totalPixels: 3164 },\n    rate:3,\n    init:`ctx.arc()方法的參數有：：圓心x,圓心y座標,半徑,起始角度,結束角度`\n  },\n  {\n    title: \"lesson 6\",\n    description: \"用函數畫圖\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\n var ctx = canvas.getContext('2d');\n      \\n ctx.clearRect(0,0,canvas.width,canvas.height);\n      \\n function drawCircle(x,y,r){\n      \\n ctx.beginPath();\n      \\n ctx.arc(x,y,r,0,2*Math.PI);\n      \\n ctx.stroke();\n      \\n}\n      \\n drawCircle(100,100,50);\n      `,\n    instruction: `//   新增畫圓函數並執行，中心點(100,100)半徑50\n      `,\n    signature: { imageDiff: 823, totalPixels: 3164 },\n    rate:4,\n    init:`新增function方法，function內容為畫圓`\n  },\n  {\n    title: \"lesson 7\",\n    description: \"使用函數重複執行\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\n var ctx = canvas.getContext('2d');\n      \\n ctx.clearRect(0,0,canvas.width,canvas.height);\n      \\n function drawCircle(x,y,r){\n      \\n ctx.beginPath();\n      \\n ctx.arc(x,y,r,0,2*Math.PI);\n      \\n ctx.stroke();\n      \\n}\n      \\n drawCircle(100,100,50);\n      \\n drawCircle(50,100,50);\n      \\n drawCircle(150,100,50);\n      `,\n    instruction: `//   新增畫圓函數並執行\n//中心點分別為(100,100)、(50,100)、(150,100)半徑50\n      `,\n    signature: { imageDiff: 823, totalPixels: 3164 },\n    rate:4,\n    init:`將剛才的函數根據各圓心座標多次執行就可以囉`\n  },\n  {\n    title: \"lesson 8\",\n    description: \"多次執行\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\n var ctx = canvas.getContext('2d');\n      \\n ctx.clearRect(0,0,canvas.width,canvas.height);\n      \\n function drawCircle(x,y,r){\n      \\n ctx.beginPath();\n      \\n ctx.arc(x,y,r,0,2*Math.PI);\n      \\n ctx.stroke();\n      if (r > 2) { // condition for drawing similarity\n        drawCircle(x + r, y, r / 2);\n        drawCircle(x - r, y, r / 2);\n        }\n      \\n}\n      \\n drawCircle(100,100,50);\n      `,\n    instruction: `//加入條件式讓函數執行多次，對稱圖條件如下:\n    // if (r > 2) { \n//drawCircle(x + r, y, r / 2);\n//drawCircle(x - r, y, r / 2);\n//}`,\n    signature: { imageDiff: 823, totalPixels: 3164 },\n    rate:5,\n    init:`//這是畫圓的函數\n    function drawCircle(x,y,r){\n      ctx.beginPath();\n      ctx.arc(x,y,r,0,2*Math.PI);\n      ctx.stroke();\n      //條件式\n      if (r > 2) { // condition for drawing similarity\n        drawCircle(x + r, y, r / 2);\n        drawCircle(x - r, y, r / 2);\n        }\n      }\n      drawCircle(100,100,50);`\n  },\n  {\n    title: \"lesson 9\",\n    description: \"遞迴樹\",\n    code2Learn: `\\nvar canvas = document.getElementById('fractal');\n      \\n var ctx = canvas.getContext('2d');\n      \\n canvas.width = window.innerWidth; // 畫布寬 = 視窗內的寬\n      \\n canvas.height = window.innerHeight; // 畫布高 = 視窗內的高\n      \\n ctx.fillStyle = '#fff5a5';\n      \\n ctx.fillRect(0, 0, canvas.width, canvas.height);\n      \\n ctx.clearRect(0,0,canvas.width,canvas.height);\n      \\n function draw(startX, startY, len, angle) {\n      \\n  ctx.beginPath();\n      \\n  ctx.save();\n        \n        //中間樹幹\n      \\n  ctx.translate(startX, startY);\n      \\n  ctx.rotate(angle * Math.PI/180);\n      \\n  ctx.moveTo(0, 0);\n      \\n  ctx.lineTo(0, -len);\n      \\n  ctx.stroke();\n\n      \\n  if(len < 10) {\n        \\n      ctx.restore();\n        \\n   return;\n        \\n  }\n        \\n  draw(0, -len, len*0.8, -15);//左邊分之\n        \\ndraw(0, -len, len*0.8, +15);//右邊分支\n        \\nctx.restore();//恢復預設值，分支才會從中間樹幹頂點開始生長\n        \\n}\n        \\ndraw(300, 250, 50, 0)   \n      `,\n    instruction: `//繪製遞迴樹初始點(300,250)、初始樹枝長度50\n//角度0度開始生長，遞迴條件限制於長度小於10停止\n`,\n    signature: { imageDiff: 823, totalPixels: 3164 },\n    rate:5,\n    init:`function draw(startX, startY, len, angle) {\n        ctx.beginPath();\n        ctx.save();\n        \n        //中間樹幹\n        ctx.translate(startX, startY);\n        ctx.rotate(angle * Math.PI/180);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(0, -len);\n        ctx.stroke();\n\n        if(len < 10) {\n              ctx.restore();\n           return;\n          }\n          draw(0, -len, len*0.8, -15);//左邊分之\n        draw(0, -len, len*0.8, +15);//右邊分支\n        ctx.restore();//恢復預設值，分支才會從中間樹幹頂點開始生長\n        }\n        draw(300, 250, 50, 0) `\n  },\n];\n\n//編輯器樣式\nlet editor = CodeMirror.fromTextArea(document.getElementById(\"editor\"), {\n  mode: \"javascript\",\n  theme: \"dracula\",\n  lineNumbers: \"true\",\n  lineWrapping: \"true\",\n  //   // styleActiveLine: true,\n  //   // matchBrackets: true,\n  //   // autoCloseBrackets: true,\n  //   // autoCloseTags: true,\n  //   // theme:'dracula',\n  //   // mode: \"htmlmixed\",\n});\n//卡片按鈕回應\nfunction clickAlert(){\n  Swal.fire('閱讀後可至下方進行實作挑戰！');\n}\n//儲存鈕回應\nfunction saveData(){\n  Swal.fire({\n    title: '將資料儲存進個人頁面?',\n    showDenyButton: true,\n    showCancelButton: true,\n    confirmButtonText: '儲存',\n    denyButtonText: `先不要`,\n  }).then((result) => {\n    /* Read more about isConfirmed, isDenied below */\n    if (result.isConfirmed) {\n      Swal.fire('儲存成功!', '', 'success')\n    } else if (result.isDenied) {\n      Swal.fire('資料未儲存，僅保留系統儲存資料', '', 'info')\n    }\n  })\n}\n\n\n//執行按鈕\nconst run = document.querySelector(\"#run\");\nlet code = editor.getValue();\n\nlet canvasPrepare = `var canvas = document.getElementById('fractal');\n\\n canvas.setAttribute('width',innerWidth);\n\\n canvas.setAttribute('height',innerHeight);\n\\n var ctx =  canvas.getContext('2d');`;\n\n//執行按鈕點擊觸發\nrun.addEventListener(\"onload\", () => {\n  // resizeCanvas();\n  let htmlCode = `<canvas id='fractal'></canvas>`;\n  let jsCode =\n    \"<scri\" + \"pt>\" + canvasPrepare + editor.getValue() + \"</scri\" + \"pt>\";\n  let doc = document.querySelector(\"#iview\").contentWindow.document;\n  doc.open();\n  doc.write(htmlCode + jsCode);\n  previewWindow.close();\n});\n\n//改變canvas大小,撐滿空間\nfunction resizeCanvas() {\n  var width = document.querySelector(\".view\").clientWidth;\n  var height = document.querySelector(\".view\").clientHeight;\n  document.querySelector(\"#iview\").setAttribute(\"height\", `${height}`);\n  document.querySelector(\"#iview\").setAttribute(\"width\", `${width}`);\n  // document.querySelector(\"#iview\").setAttribute(\"overflow\", \"hidden\");\n}\n\nvar images; // images for comparison\nvar doc; // user source code\nlet width; // width of editor\nlet height; // height of editor\nvar canvasCode; // declaring canvas\nvar current_lesson;\nvar instruction;\nvar code2Learn; // the code lesson\nvar destinationCode; // used to compare user source code\nvar sourceCode; // user source code\n// var code;\nvar preview; // flag for preview\nconst verification = `\\n \n    image2 = ctx.getImageData(0,0,canvas.width,canvas.height);\n    totalPixels = 0;\n    imageDiff = 0;\n    for (let i=0; i<image1.data.length;i++){\n        if(image1.data[i]!=0) totalPixels++; \n        if(image1.data[i]!=image2.data[i]) imageDiff ++;\n    }\n    localStorage.setItem(\"totalPixels\", totalPixels);                                         \n    localStorage.setItem(\"imageDiff\", imageDiff);\n`;\nconst clearScreen = `ctx.clearRect(0,0,canvas.width,canvas.height);`;\nconst showSample = `ctx.clearRect(0,0,canvas.width,canvas.height);\n  ctx.putImageData(image1,0,0);`;\n\ninit();\nfunction init() {\n  images = `\n    \\n var image1 = ctx.getImageData(0, 0, canvas.width,canvas.height);\n    \\n var image2;  \n    \\n var image3 = ctx.createImageData(canvas.width,canvas.height);\n    \\n var totalPixels = 0;\n    \\n var imageDiff = 0;`\n\n  doc = document.getElementById(\"iview\").contentWindow.document;\n  width = document.getElementById(\"iview\").clientWidth;\n  height = document.getElementById(\"iview\").clientHeight;\n  canvasCode = `<canvas id=\"fractal\"></canvas> \\n`;\n  getSignatures();\n\n  /* start to learn */\n  current_lesson;\n  code2Learn = lessons[current_lesson].code2Learn;\n  instruction = lessons[current_lesson].instruction;\n  destinationCode =\n    canvasCode + \"<scri\" + \"pt>\" + code2Learn + images + \"\\n</scri\" + \"pt>\";\n  editor.setValue(instruction);\n\n  // write original code  (code to learn )to produce image 1\n  doc.open();\n  doc.write(destinationCode); // open until user done editing\n\n  // preview=true;   // flag to quick response user coding\n}\nfunction getSignatures() {\n  for (let i = 0; i < lessons.length; i++) {\n    code2Learn = lessons[i].code2Learn;\n    destinationCode =\n      canvasCode +\n      \"<scri\" +\n      \"pt>\" +\n      code2Learn +\n      images +\n      clearScreen +\n      code2Learn +\n      verification +\n      \"\\n</scri\" +\n      \"pt>\";\n    doc.open();\n    doc.write(destinationCode);\n    doc.close();\n    lessons[i].signature.imageDiff = parseInt(\n      localStorage.getItem(\"imageDiff\")\n    );\n    lessons[i].signature.totalPixels = parseInt(\n      localStorage.getItem(\"totalPixels\")\n    );\n  }\n}\n\nlet userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\nif(userInfo!=undefined){\n  document.querySelector(\"#user\").innerHTML=`<h3 class=\"text-primary\" id=\"user\">歡迎，${userInfo[0].name}</h3>`;\n}else{\n  ;\n}\nlet userfinishedData = userInfo[0].finished.filter(function(value) {\n  return value == true;\n});\nlet correct = parseInt(userfinishedData.length);   // the number of correct coding\nlet players;\nif(JSON.parse(localStorage.getItem(\"players\"))){\n  players= JSON.parse(localStorage.getItem(\"players\"));\n}else{\n  players={};\n}\n//改變progress\nfunction progressCheck(){\n  userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n  let correctArray = userInfo[0].finished.filter(function(value) {\n    return value == true;\n  });\n  let correctNum = parseInt(correctArray.length);\n  document.getElementById(\"progress\").style.width = `${\n    (correctNum / lessons.length) * 100\n  }%`;\n  document.querySelector(\"#progress\").classList.add('progress','bg-primary')\n  document.getElementById(\n    \"progress\"\n  ).innerHTML = `<h6 class=\"text-center w-100 text-light\">${correctNum}/${lessons.length}</h6>`;\n}\n//積分累加\nfunction rateCount(){\n  let status = userInfo[0].finished[current_lesson];\n  if(status){\n    ;\n  }else{\n    userInfo[0].rate+=lessons[current_lesson].rate;\n    players[`${userInfo[0].name}`] = {\"rate\":`${userInfo[0].rate}`};\n  }\n}\n\nfunction check() {\n  doc.write(\n    \"<scri\" +\n      \"pt>\" +\n      clearScreen +\n      editor.getValue() +\n      verification +\n      \"\\n</scri\" +\n      \"pt>\"\n  );\n  let imageDiff = parseInt(localStorage.getItem(\"imageDiff\"));\n  let totalPixels = parseInt(localStorage.getItem(\"totalPixels\"));\n  let distanceSquare =\n    (imageDiff - lessons[current_lesson].signature.imageDiff) *\n      (imageDiff - lessons[current_lesson].signature.imageDiff) +\n    (totalPixels - lessons[current_lesson].signature.totalPixels) *\n      (totalPixels - lessons[current_lesson].signature.totalPixels);\n  if (distanceSquare < 20) {\n    rateCount();\n    Swal.fire({\n      title: '正確!',\n      text: `共獲得${lessons[current_lesson].rate}積分`,\n      icon: 'success',\n      html:`共獲得${lessons[current_lesson].rate}積分`,\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'OK'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        progressCheck();\n        next();\n      }\n    })\n    localStorage.setItem(\"players\",JSON.stringify(players));\n    userInfo[0].finished.splice(`${current_lesson}`,1,true);\n    localStorage.setItem(\"userInfo\",JSON.stringify(userInfo));\n  } else {\n    Swal.fire({\n      title: '需要幫忙嗎?',\n      text: \"觀看提示內容幫助過關!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: '是的我需要!'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        Swal.fire(\n          `${lessons[current_lesson].init}`,\n          '再試試看吧',\n          'success'\n        )\n      }\n    })\n    destinationCode =\n    canvasCode + \"<scri\" + \"pt>\" + code2Learn  + editor.getValue()+ \"\\n</scri\" + \"pt>\";\n  doc.close(); // close last action\n  doc.open();\n  doc.write(destinationCode);\n  }\n}\n\n// var delay;\n// editor.addEventListener(\"change\", function () {\n//   clearTimeout(delay);\n//   if (preview) delay = setTimeout(updatePreview, 300);\n// });\n\nfunction updatePreview() {\n  code = editor.getValue().replace(/^\\s*/, \"\");\n   sourceCode = \"<scri\" + \"pt>\" + showSample + code + \"\\n</scri\" + \"pt>\";\n  //sourceCode = \"<scri\" + \"pt>\" + code + \"\\n</scri\" + \"pt>\";\n  doc.write(sourceCode);\n}\n// delay = setTimeout(updatePreview(), 1000);\n\nfunction reset() {\n  let userName=userInfo[0].name;\n  let user={\n    name:userName,\n    rate:0,\n    finished:[false,false,false,false,false,false,false,false,false],\n    percentage:0,\n  };\n  users.push(user);\n  localStorage.setItem(\"userInfo\",JSON.stringify(users));\n  if (location.pathname == \"/canvasLearning/courseDetail.html\" ||location.pathname == \"/courseDetail.html\") {\n    current_lesson = 0;\n  } else if (location.pathname == \"/canvasLearning/courseDetail-mid.html\"||location.pathname == \"/courseDetail-mid.html\") {\n    current_lesson = 6;\n  } else {\n    current_lesson = 8;\n  }\n  code2Learn = lessons[current_lesson].code2Learn;\n\n  destinationCode =\n    canvasCode + \"<scri\" + \"pt>\" + code2Learn + images + \"\\n</scri\" + \"pt>\";\n  instruction = lessons[current_lesson].instruction;\n  editor.setValue(instruction);\n  doc.close(); // close last action\n  doc.open();\n  doc.write(destinationCode);\n  progressCheck();\n}\nfunction questionThree(){\n  userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n  let correctArray = userInfo[0].finished.filter(function(value) {\n    return value == true;\n  });\n  if(correctArray.length==3){\n    Swal.fire({\n      title: '完成3關囉',\n      text: '可以填寫問卷或繼續挑戰',\n      imageUrl: 'https://media.istockphoto.com/id/1409356578/photo/3d-two-popper-with-confetti-for-party-birthday-and-new-year-3d-rendering-illustration.jpg?b=1&s=170667a&w=0&k=20&c=l7oqejsS4BBaZjmDyet2oexLIHGjKeRGRmaf0V1UAmE=',\n      imageWidth: 400,\n      imageHeight: 200,\n      imageAlt: 'good job image',\n      footer: '<a href=\"https://forms.gle/hV9w1XXz6uPbjjB28\" class=\"text-decoration-none text-primary\">問卷連結</a>'\n    })\n  }\n}\nfunction totalCheck(){\n  userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n  let correctArray = userInfo[0].finished.filter(function(value) {\n    return value == true;\n  });\n  if(correctArray.length==9){\n    Swal.fire({\n      title: '恭喜!已完成所有關卡！',\n      text: '可以填寫問卷囉',\n      imageUrl: 'https://images.unsplash.com/photo-1499233983070-99a5f004e720?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8M3x8ZmlyZXdvcmtzfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=800&q=60',\n      imageWidth: 400,\n      imageHeight: 200,\n      imageAlt: 'fireworks image',\n      footer: '<a href=\"https://forms.gle/hV9w1XXz6uPbjjB28\" class=\"text-decoration-none text-primary\">問卷連結</a>'\n    })\n  }\n}\nfunction next() {\n  getSignatures();\n  current_lesson = (current_lesson + 1) % lessons.length;\n  code2Learn = lessons[current_lesson].code2Learn;\n  destinationCode =\n    canvasCode + \"<scri\" + \"pt>\" + code2Learn + images + \"\\n</scri\" + \"pt>\";\n  instruction = lessons[current_lesson].instruction;\n  editor.setValue(instruction);\n  doc.close(); // close last action\n  doc.open();\n  doc.write(destinationCode);\n  \n  if(current_lesson==6){\n    Swal.fire({\n      title: '開始中級內容囉',\n      text: \"需要幫你更換教學內容嗎!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: '是的我需要!'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        Swal.fire(\n          '跳轉成功',\n          'success'\n        )\n        location.href=\"courseDetail-mid.html\"\n      }\n    })\n  }\n  if(current_lesson==8){\n    Swal.fire({\n      title: '開始困難內容囉',\n      text: \"需要幫你更換教學內容嗎!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: '是的我需要!'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        Swal.fire(\n          'success'\n        )\n        location.href=\"courseDetail-hard.html\"\n      }\n    })\n  }\n  totalCheck();\n  questionThree();\n}\n\nfunction prev() {\n  current_lesson = (current_lesson - 1 + lessons.length) % lessons.length;\n  code2Learn = lessons[current_lesson].code2Learn;\n  destinationCode =\n    canvasCode + \"<scri\" + \"pt>\" + code2Learn + images + \"\\n</scri\" + \"pt>\";\n  instruction = lessons[current_lesson].instruction;\n  editor.setValue(instruction);\n  doc.close(); // close last action\n  doc.open();\n  doc.write(destinationCode);\n}\nprogressCheck();\n","// console.log('swiper start');\n// let swiper = new Swiper(\".courseSwiper\", {\n//     slidesPerView: 'auto',\n//     spaceBetween: 20,\n//     // slidesPerGroup: 3,\n//     loop: true,\n//     loopFillGroupWithBlank: true,\n//     // pagination: {\n//     //   el: \".swiper-pagination\",\n//     //   clickable: true,\n//     // },\n//     navigation: {\n//       nextEl: \".swiper-button-next\",\n//       prevEl: \".swiper-button-prev\",\n//     },\n//   });\n//   console.log('swiper end');"]}